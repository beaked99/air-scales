{# templates/app/index.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Air Scales{% endblock %}

{% block stylesheets %}
  {{ parent() }}
  <link rel="manifest" href="/app/manifest.webmanifest">
  <link rel="icon" href="/app/icon-192.png">
  <link rel="apple-touch-icon" href="/app/icon-192.png">
  <meta name="theme-color" content="#1f7a1f">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
{% endblock %}

{% block body %}
<main data-controller="landing" 
      data-landing-dashboard-url-value="{{ path('app_dashboard') }}">
    
    <section id="hero">
        <h1>Monitor your axle weights in real time on your truck or trailer from your phone.</h1>
        <p>Install the hardware and app. Sync and Calibrate. Drive smarter.</p>

        {% if app.user %}
            <p>Welcome back, {{ app.user.email }}.</p>
            <button data-action="click->landing#goToDashboard" 
                    class="btn-primary">
                Go to Dashboard
            </button>
        {% else %}
            <nav>
                <button data-action="click->landing#registerUser" 
                        class="btn-primary">
                    Create Account
                </button>
                <button data-action="click->landing#loginUser" 
                        class="btn-secondary">
                    Sign In
                </button>
            </nav>
        {% endif %}

        <div id="installPrompt" hidden>
            <button id="installApp" class="btn-success">
                ðŸ“± Install App
            </button>
        </div>

        <div id="browserWarning" hidden style="color: red;">
            <!-- Browser warning messages appear here -->
        </div>
    </section>

    <section id="dashboardPreview">
        <h2>Live Dashboard Preview</h2>
        <p>[Placeholder for charts, gauges, real-time sensor display]</p>
    </section>

    <div class="bg-red-600 text-white p-6 rounded-xl shadow-lg mt-4">
      <h2 class="text-2xl font-bold">Tailwind is working ðŸŽ‰</h2>
      <p class="mt-2 text-sm">If you see this styled correctly, we're good to go.</p>
    </div>

    <footer>
        <hr>
        <small>
            Version: {{ app_version|default('dev') }} |
            Build: {{ build_date|default('now'|date('Y-m-d')) }}
        </small>
    </footer>
</main>
{% endblock %}
